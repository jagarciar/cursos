"use strict";(self.webpackChunkcursos=self.webpackChunkcursos||[]).push([[9353],{8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>c});var r=s(6540);const o={},t=r.createContext(o);function a(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),r.createElement(t.Provider,{value:n},e.children)}},8672:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>i,contentTitle:()=>c,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"programacion/reactjs/hooks/useFetch","title":"useFetch","description":"En este tutorial vamos hacer uso del hook useFetch para consumir API\'s en un proyecto ReactJS","source":"@site/docs/programacion/reactjs/hooks/useFetch.md","sourceDirName":"programacion/reactjs/hooks","slug":"/programacion/reactjs/hooks/useFetch","permalink":"/cursos/docs/programacion/reactjs/hooks/useFetch","draft":false,"unlisted":false,"editUrl":"https://github.com/jagarciar/cursos/tree/main/docs/programacion/reactjs/hooks/useFetch.md","tags":[{"inline":false,"label":"React","permalink":"/cursos/docs/tags/about-react","description":"Tutoriales donde se menciona la palabra react"},{"inline":false,"label":"React JS","permalink":"/cursos/docs/tags/about-react-js","description":"Tutoriales donde se menciona la palabra reactjs"},{"inline":false,"label":"NPM","permalink":"/cursos/docs/tags/about-npm","description":"Tutoriales donde se menciona la palabra npm"},{"inline":false,"label":"Vite","permalink":"/cursos/docs/tags/about-vite","description":"Tutoriales donde se menciona la palabra vite"},{"inline":false,"label":"useState","permalink":"/cursos/docs/tags/about-useState","description":"Tutoriales donde se menciona la palabra useState"},{"inline":false,"label":"useEffect","permalink":"/cursos/docs/tags/about-useEffect","description":"Tutoriales donde se menciona la palabra useEffect"},{"inline":false,"label":"useFetch","permalink":"/cursos/docs/tags/about-useFetch","description":"Tutoriales donde se menciona la palabra useFetch"},{"inline":false,"label":"hooks","permalink":"/cursos/docs/tags/about-hooks","description":"Tutoriales donde se menciona la palabra hooks"}],"version":"current","lastUpdatedBy":"Jeyson Andr\xe9s Garc\xeda Rodr\xedguez","lastUpdatedAt":1745452800000,"sidebarPosition":9,"frontMatter":{"id":"useFetch","title":"useFetch","sidebar_position":9,"author":"jeogarod","description":"En este tutorial vamos hacer uso del hook useFetch para consumir API\'s en un proyecto ReactJS","tags":["react","reactjs","npm","vite","useState","useEffect","useFetch","hooks"],"last_update":{"date":"04/24/2025","author":"Jeyson Andr\xe9s Garc\xeda Rodr\xedguez"}},"sidebar":"tutorialSidebar","previous":{"title":"useCounter","permalink":"/cursos/docs/programacion/reactjs/hooks/useCounter"},"next":{"title":"useLocalStorage","permalink":"/cursos/docs/programacion/reactjs/hooks/useLocalStorage"}}');var o=s(4848),t=s(8453);const a={id:"useFetch",title:"useFetch",sidebar_position:9,author:"jeogarod",description:"En este tutorial vamos hacer uso del hook useFetch para consumir API's en un proyecto ReactJS",tags:["react","reactjs","npm","vite","useState","useEffect","useFetch","hooks"],last_update:{date:"04/24/2025",author:"Jeyson Andr\xe9s Garc\xeda Rodr\xedguez"}},c="useFetch",i={},l=[];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",header:"header",p:"p",pre:"pre",strong:"strong",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"usefetch",children:"useFetch"})}),"\n",(0,o.jsxs)(n.p,{children:["En el siguiente ejemplo creamos un ",(0,o.jsx)(n.strong,{children:"custom hook"})," nombrado ",(0,o.jsx)(n.strong,{children:"useFetch"})," en el archivo ",(0,o.jsx)(n.strong,{children:"/src/FetchHook.jsx"}),". El ",(0,o.jsx)(n.strong,{children:"hook"})," ",(0,o.jsx)(n.strong,{children:"useFetch"})," recibe un par\xe1metro nombrado ",(0,o.jsx)(n.strong,{children:"url"})," y tiene tres variables de estado : ",(0,o.jsx)(n.strong,{children:"data"}),", ",(0,o.jsx)(n.strong,{children:"loading"})," y ",(0,o.jsx)(n.strong,{children:"error"}),". Por cada variable de estado, el ",(0,o.jsx)(n.strong,{children:"hook"})," define tres funciones : ",(0,o.jsx)(n.strong,{children:"setData"}),", ",(0,o.jsx)(n.strong,{children:"setLoading"})," y ",(0,o.jsx)(n.strong,{children:"setError"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["El ",(0,o.jsx)(n.strong,{children:"hook"})," ",(0,o.jsx)(n.strong,{children:"useFetch"})," no retorna un elemento ",(0,o.jsx)(n.strong,{children:"HTML"}),", por el contrario retorna las variables de estado ",(0,o.jsx)(n.strong,{children:"data"}),", ",(0,o.jsx)(n.strong,{children:"loading"})," y ",(0,o.jsx)(n.strong,{children:"error"}),". Adicionalmente, el ",(0,o.jsx)(n.strong,{children:"hook"})," ",(0,o.jsx)(n.strong,{children:"useFetch"})," defini\xf3 un ",(0,o.jsx)(n.strong,{children:"hook"})," ",(0,o.jsx)(n.strong,{children:"useEffect"})," que invoca o consume una ",(0,o.jsx)(n.strong,{children:"API REST"})," a trav\xe9s de ",(0,o.jsx)(n.strong,{children:"fetch"}),"."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",metastring:'title="/src/FetchHook.jsx"',children:"import { useState, useEffect } from 'react';\n\nexport const useFetch = (url) => {\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await fetch(url);\n        if (!response.ok) {\n          throw new Error('Network response was not ok');\n        }\n        const result = await response.json();\n        setData(result);\n      } catch (error) {\n        setError(error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, [url]);\n\n  return { data, loading, error };\n}\n"})}),"\n",(0,o.jsx)(n.admonition,{type:"danger",children:(0,o.jsxs)(n.p,{children:["No debes llamar a ",(0,o.jsx)(n.strong,{children:"Hooks"})," como ",(0,o.jsx)(n.a,{href:"/cursos/docs/programacion/reactjs/hooks/useState",children:"useState"})," o ",(0,o.jsx)(n.a,{href:"/cursos/docs/programacion/reactjs/hooks/useEffect",children:"useEffect"})," condicionalmente o dentro de ciclos o funciones anidadas. Siempre deben ser utilizados en el nivel superior de tu componente o ",(0,o.jsx)(n.strong,{children:"Hook personalizado"}),". Esto asegura que los Hooks se ejecuten en el mismo orden cada vez que tu componente se renderiza, lo cual es crucial para el correcto funcionamiento de React."]})}),"\n",(0,o.jsxs)(n.p,{children:["Finalmente solo necesitamos reutilizar el ",(0,o.jsx)(n.strong,{children:"hook"})," ",(0,o.jsx)(n.strong,{children:"useFetch"})," en alg\xfan componente que lo requiera:"]}),"\n",(0,o.jsxs)(n.p,{children:["En el archivo ",(0,o.jsx)(n.strong,{children:"/src/PokemonApp.jsx"})," se creo el componente ",(0,o.jsx)(n.strong,{children:"Pokemon"})," el cu\xe1l hace uso del ",(0,o.jsx)(n.strong,{children:"hook"})," ",(0,o.jsx)(n.strong,{children:"useFetch"}),". El ",(0,o.jsx)(n.strong,{children:"hook"})," recibe la ",(0,o.jsx)(n.strong,{children:"url"})," o ",(0,o.jsx)(n.strong,{children:"endpoint"})," de la API REST que consumir\xe1 o invocar\xe1 y retorna una bandera que determina si a\xfan est\xe1 siendo consumida la API, una bandera que determina si se gener\xf3 un error y/o los datos obtenidos en la respuesta."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",metastring:'title="/src/PokemonApp.jsx"',children:"import React from 'react'\nimport {useFetch} from './FetchHook'\n\nexport const Pokemon = () => {\n\n    const {data, loading, error} = useFetch('https://pokeapi.co/api/v2/type/3');\n\n    if (loading) return <p>Loading...</p>;\n    if (error) return <p>Error: {error.message}</p>;\n\n    return (\n        <div>\n            <h1>Data:</h1>\n            <pre>{JSON.stringify(data, null, 2)}</pre>\n        </div>\n    );\n}\n"})}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsxs)(n.p,{children:["En dado caso el ",(0,o.jsx)(n.strong,{children:"m\xe9todo HTTP"})," de la ",(0,o.jsx)(n.strong,{children:"API REST"})," no sea ",(0,o.jsx)(n.strong,{children:"GET"})," es necesario crear una variable ",(0,o.jsx)(n.strong,{children:"options"})," que debe ser enviada a la funci\xf3n ",(0,o.jsx)(n.strong,{children:"fetch"}),"."]})}),"\n",(0,o.jsxs)(n.p,{children:["En el siguiente ejemplo, nuestro ",(0,o.jsx)(n.strong,{children:"hook"})," ",(0,o.jsx)(n.strong,{children:"useFetch"})," recibe tres par\xe1metros : ",(0,o.jsx)(n.strong,{children:"url"}),", ",(0,o.jsx)(n.strong,{children:"method"})," y ",(0,o.jsx)(n.strong,{children:"bodyData"}),". El par\xe1metro ",(0,o.jsx)(n.strong,{children:"url"})," representa el endpoint de la ",(0,o.jsx)(n.strong,{children:"API REST"}),". El par\xe1metro ",(0,o.jsx)(n.strong,{children:"method"})," representa el ",(0,o.jsx)(n.strong,{children:"m\xe9todo HTTP"})," (",(0,o.jsx)(n.strong,{children:"GET"}),", ",(0,o.jsx)(n.strong,{children:"POST"}),", ",(0,o.jsx)(n.strong,{children:"PUT"}),", ",(0,o.jsx)(n.strong,{children:"DELETE"}),"). El par\xe1metro ",(0,o.jsx)(n.strong,{children:"bodyData"})," representa el contenido que debe ser enviado \xfanica y opcionalmente en una petici\xf3n ",(0,o.jsx)(n.strong,{children:"POST"})," o ",(0,o.jsx)(n.strong,{children:"PUT"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["El ",(0,o.jsx)(n.strong,{children:"hook"})," ",(0,o.jsx)(n.strong,{children:"useFetch"})," defini\xf3 en un ",(0,o.jsx)(n.strong,{children:"useEffect"})," el llamado a la ",(0,o.jsx)(n.strong,{children:"API REST"}),". En el llamado a la funci\xf3n ",(0,o.jsx)(n.strong,{children:"fetch"})," se env\xeda la ",(0,o.jsx)(n.strong,{children:"url"})," y un objeto nombrado ",(0,o.jsx)(n.strong,{children:"options"}),". El objeto ",(0,o.jsx)(n.strong,{children:"options"})," tiene tres propiedades : ",(0,o.jsx)(n.strong,{children:"method"}),", ",(0,o.jsx)(n.strong,{children:"headers"})," y ",(0,o.jsx)(n.strong,{children:"body"}),". En la propiedad ",(0,o.jsx)(n.strong,{children:"method"})," se almacenar\xe1 el ",(0,o.jsx)(n.strong,{children:"m\xe9todo HTTP"}),". En la propiedad ",(0,o.jsx)(n.strong,{children:"headers"})," se incluir\xe1 el atributo ",(0,o.jsx)(n.strong,{children:"Content-type"})," para definir que la petici\xf3n y la respuesta ser\xe1n bajo ",(0,o.jsx)(n.strong,{children:"JSON"}),". En la propiedad ",(0,o.jsx)(n.strong,{children:"body"})," se almacenar\xe1 el valor de la variable ",(0,o.jsx)(n.strong,{children:"bodyData"}),"."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",metastring:'title="/src/FetchHook.jsx"',children:"import { useState, useEffect } from 'react';\n\nexport const useFetch = (url, method, bodyData = null) => {\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const options = {\n          method: method,\n          headers:{\n            'Content-type':'application/json; charset=UTF-8'\n          },\n          body: method == 'GET' || method == 'DELETE' ? null : JSON.stringify(bodyData)\n        }\n        const response = await fetch(url, options);\n        if (!response.ok) {\n          throw new Error('Network response was not ok');\n        }\n        const result = await response.json();\n        setData(result);\n      } catch (error) {\n        setError(error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, [url]);\n\n  return { data, loading, error };\n}\n"})})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}}}]);